355.Design Twitter
public class TwitterUser {
    public Set<Integer> follows;
    public List<Tweet> tweets;
    public TwitterUser() {
        follows = new HashSet<Integer>();
        tweets = new ArrayList<Tweet>();
    }
}

public class Tweet {
    public int tweetId;
    public int tweetStamp;
    public Tweet(int tweetId, int tweetStamp) {
        this.tweetId = tweetId;
        this.tweetStamp = tweetStamp;
    }
}

public Map<Integer, TwitterUser> userMap;
public int stamp;

/** Initialize your data structure here. */
public Twitter() {
    userMap = new HashMap<Integer, TwitterUser>();
    stamp = 0;
}

/** Compose a new tweet. */
public void postTweet(int userId, int tweetId) {
    Tweet tweet = new Tweet(tweetId, stamp++);
    TwitterUser twitterUser = userMap.getOrDefault(userId, new TwitterUser());
    twitterUser.tweets.add(tweet);
    userMap.put(userId, twitterUser);
}

/** Retrieve the 10 most recent tweet ids in the user's news feed. Each item in the news feed must be posted by users who the user followed or by the user herself. Tweets must be ordered from most recent to least recent. */
public List<Integer> getNewsFeed(int userId) {
    TwitterUser twitterUser = userMap.getOrDefault(userId, new TwitterUser());
    PriorityQueue<Tweet> pq = new PriorityQueue<Tweet>((a, b) -> {
        return a.tweetStamp - b.tweetStamp;
    });
    for (Tweet tweet : twitterUser.tweets) {
        pq.offer(tweet);
        if (pq.size() > 10) {
            pq.poll();
        }
    }
    for (int followeeId : twitterUser.follows) {
        if (userMap.containsKey(followeeId)) {
            for (Tweet tweet : userMap.get(followeeId).tweets) {
                pq.offer(tweet);
                if (pq.size() > 10) {
                    pq.poll();
                }
            }
        }
    }
    List<Integer> list = new ArrayList<Integer>();
    while (!pq.isEmpty()) {
        list.add(0, pq.poll().tweetId);
    }
    return list;
}

/** Follower follows a followee. If the operation is invalid, it should be a no-op. */
public void follow(int followerId, int followeeId) {
    if (followerId == followeeId) {
        return;
    }
    TwitterUser follower = userMap.getOrDefault(followerId, new TwitterUser());
    follower.follows.add(followeeId);
    userMap.put(followerId, follower);
}

/** Follower unfollows a followee. If the operation is invalid, it should be a no-op. */
public void unfollow(int followerId, int followeeId) {
    TwitterUser follower = userMap.getOrDefault(followerId, new TwitterUser());
    follower.follows.remove(followeeId);
}